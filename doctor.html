<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>لوحة الطبيب – العيادة المدرسية الذكية</title>

  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/style.css" />
</head>

<body data-page="doctor">
  <div class="app-shell fade-in" style="min-height:100vh;display:flex;flex-direction:column;gap:18px;">

    <!-- AppBar -->
    <header class="app-header glass" style="padding:14px 20px;display:flex;justify-content:space-between;align-items:center;">
      <div style="display:flex;align-items:center;gap:10px;">
        <div class="brand-mark" style="
          width:40px;height:40px;border-radius:14px;
          background:linear-gradient(135deg,#4f8cff,#7b5cff);
          display:flex;align-items:center;justify-content:center;
          font-weight:700;font-size:1rem;">
          DR
        </div>
        <div>
          <div style="font-weight:600;">لوحة الطبيب</div>
          <div style="font-size:0.8rem;color:var(--text-muted);">
            تشخيص، متابعة، زيارات افتراضية، دعم بالذكاء الاصطناعي
          </div>
        </div>
      </div>

      <div style="display:flex;align-items:center;gap:8px;">
        <button class="icon-btn" id="theme-toggle">
          <span class="material-symbols-rounded">brightness_6</span>
        </button>
        <button class="icon-btn danger" onclick="home()">
          <span class="material-symbols-rounded">logout</span>
        </button>
      </div>
    </header>

    <!-- Layout -->
    <main style="flex:1;display:grid;grid-template-columns:2.1fr 1.4fr;gap:16px;">

      <!-- يسار: قائمة الحالات + تفاصيل الحالة -->
      <section style="display:flex;flex-direction:column;gap:12px;">

        <!-- قائمة الحالات -->
        <div class="glass card" style="padding:14px;flex:1;display:flex;flex-direction:column;gap:10px;">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <h2 style="font-size:1rem;">قائمة الحالات</h2>
            <span class="badge badge-normal">اليوم</span>
          </div>

          <div id="doctor-cases" style="display:flex;flex-direction:column;gap:8px;margin-top:6px;">
            <!-- يتم تعبئتها من JS -->
          </div>
        </div>

        <!-- تفاصيل الحالة المختارة -->
        <div class="glass card" style="padding:14px;flex:1.2;display:flex;flex-direction:column;gap:10px;">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <h2 style="font-size:1rem;">تفاصيل الحالة</h2>
            <button class="primary-btn" onclick="go('student-profile.html')">ملف الطالب</button>
          </div>

          <div id="case-summary" style="font-size:0.9rem;color:var(--text-main);">
            اختر حالة من القائمة لعرض تفاصيلها.
          </div>

          <div style="margin-top:8px;">
            <h3 style="font-size:0.9rem;margin-bottom:4px;">المؤشرات الحيوية</h3>
            <div id="case-vitals" style="display:grid;grid-template-columns:repeat(4,1fr);gap:6px;font-size:0.85rem;">
              <!-- تعبئة من JS -->
            </div>
          </div>

          <div style="margin-top:8px;">
            <h3 style="font-size:0.9rem;margin-bottom:4px;">التشخيص الطبي</h3>
            <textarea id="doctor-diagnosis" placeholder="أدخل التشخيص الطبي هنا..."
              style="width:100%;height:80px;border-radius:var(--radius-md);padding:8px;background:var(--bg-card);color:var(--text-main);border:none;outline:none;"></textarea>
            <div style="margin-top:6px;display:flex;gap:8px;">
              <button class="primary-btn" onclick="doctorPanel.saveDiagnosis()">حفظ التشخيص</button>
              <button class="primary-btn danger" onclick="go('emergency-flow.html')">تحويل لمسار الطوارئ</button>
            </div>
          </div>
        </div>

      </section>

      <!-- يمين: AI + زيارة افتراضية + Snapshot -->
      <section style="display:flex;flex-direction:column;gap:12px;">

        <!-- AI Assist -->
        <div class="glass card" style="padding:14px;">
          <h2 style="font-size:1rem;margin-bottom:6px;">مساعد الذكاء الاصطناعي</h2>
          <div id="ai-assist" style="font-size:0.9rem;color:var(--text-main);">
            اختر حالة ليتم تحليل الأعراض والفايتلز واقتراح مستوى الخطورة.
          </div>
        </div>

        <!-- زيارة افتراضية -->
        <div class="glass card" style="padding:14px;">
          <h2 style="font-size:1rem;margin-bottom:6px;">زيارة افتراضية</h2>
          <p style="font-size:0.85rem;color:var(--text-muted);">
            يمكن للطبيب بدء زيارة افتراضية مع الطالب وولي الأمر في نفس الجلسة.
          </p>
          <button class="primary-btn" style="margin-top:8px;" onclick="go('video-call.html')">
            بدء زيارة صوت وصورة
          </button>
        </div>

        <!-- Snapshot -->
        <div class="glass card" style="padding:14px;flex:1;">
          <h2 style="font-size:1rem;margin-bottom:6px;">ملخص الطالب</h2>
          <div id="patient-snapshot" style="font-size:0.9rem;color:var(--text-main);">
            لا توجد حالة محددة حاليًا.
          </div>
        </div>

      </section>

    </main>

  </div>

  <script src="assets/js/app.js"></script>
</body>
</html>
